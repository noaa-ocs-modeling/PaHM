<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PaHM: Parametric Hurricane Modeling System (PaHM)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Niconne' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
   TeX: { Macros: {
    ilogo: ["{\\textit{#1}}",1],
    blogo: ["{\\textbf{#1}}",1],
    logo: ["{\\ilogo{#1}}",1],
    plogo: ["{(\\ilogo{#1}\\,)}",1],
    itchar: ["{(\\textit{#1}\\,)}",1],
    orderof: ["{\\mathcal{O}(#1)}",1],
  } }
});
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
    <td id="projectlogo">
        <a href="https://github.com/noaa-ocs-modeling/PaHM">
        <img alt="Logo" src="pahm_logo.png"/>
        </a>
    </td>
  <td id="projectbox">
   <div id="projectname">
    <span id="projectnumber">version 1.0.0</span>
   </div>
   <div id="projectbrief">Parametric Hurricane Modeling System</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('pahmsys.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Parametric Hurricane Modeling System (<em>PaHM</em>) </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#pahmsys_down">Downloading <em>PaHM</em></a><ul><li class="level2"><a href="#pahmsys_down_tree">Directory Structure</a></li>
</ul>
</li>
<li class="level1"><a href="#pahmsys_build">Building <em>PaHM</em></a><ul><li class="level2"><a href="#pahmsys_build_req">System Requirements</a></li>
<li class="level2"><a href="#pahmsys_build_bld">The Build System</a></li>
<li class="level2"><a href="#pahmsys_build_cmake">CMake Configuration Files and Modules</a></li>
</ul>
</li>
<li class="level1"><a href="#pahmsys_use">Using <em>PaHM</em></a><ul><li class="level2"><a href="#pahmsys_use_coupled">Coupled Model Configuration</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_user_guide_pahm_system"></a></p>
<p >The Parametric Hurricane Modeling System is not just another parametric atmospheric model but rather an atmospheric modeling system that contains multiple TC models that can be activated during run time to generate the required atmospheric wind fields. Currently, the core parametric models in <em>PaHM</em> are the <a class="el" href="models.html#mod_holl1980">Holland 1980</a> and the <a class="el" href="models.html#mod_gahm">Generalized Asymmetric Vortex Holland</a> models. In development is the process of extendeding the built-in I/O capabilities (CSV, NetCDF and GRIB interfaces) to allow for the digestion and the manipulation of different data formats.</p>
<p >To calculate its wind fields, <em>PaHM</em> reads "best track" type of files (e.g., those produced by the <a href="https://www.nhc.noaa.gov/" target="_BLANK" rel="NOREFERRER">National Hurricane Center</a> to generate gridded atmospheric fields (usually, 10-m wind velocities and atmospheric pressures converted to mean sea level). The file formats currently recognized by <em>PaHM</em> are: \(\itchar{a}\) <a href="https://www.nrlmry.navy.mil/atcf_web/docs/database/new/abdeck.txt" target="_BLANK" rel="NOREFERRER">a/b-deck</a>, \(\itchar{b}\) <a href="https://www.nhc.noaa.gov/data/hurdat/hurdat2-format-atlantic.pdf" target="_BLANK" rel="NOREFERRER">HurDat2</a>, \(\itchar{c}\) <a href="https://www.ncei.noaa.gov/sites/default/files/2021-07/IBTrACS_version4_Technical_Details.pdf" target="_BLANK" rel="NOREFERRER">IBTrACS</a> and \(\itchar{d}\) <a href="https://www.emc.ncep.noaa.gov/HWRF/tcvitals-draft.html" target="_BLANK" rel="NOREFERRER">TCVitals</a>. <em>PaHM</em> has a built-in CSV I/O interface therefore, it can read and write any of these files in ASCII format.</p>
<h1><a class="anchor" id="pahmsys_down"></a>
Downloading <em>PaHM</em></h1>
<p >The source code of <em>PaHM</em> is publicly available from the GitHub repository: <a href="https://github.com/noaa-ocs-modeling/PaHM" target="_BLANK" rel="NOREFERRER">https://github.com/noaa-ocs-modeling/PaHM</a> (binary distributions of <em>PaHM</em> are not currently available).</p>
<p >The online documentation of the modeling system is hosted by GitHub Pages:</p><ul>
<li>HTML version: <a href="https://noaa-ocs-modeling.github.io/PaHM/html/index.html" target="_BLANK" rel="NOREFERRER">https://noaa-ocs-modeling.github.io/PaHM/html/index.html</a></li>
<li>PDF version: <a href="https://noaa-ocs-modeling.github.io/PaHM/pahm_manual.pdf" target="_BLANK" rel="NOREFERRER">https://noaa-ocs-modeling.github.io/PaHM/pahm_manual.pdf</a></li>
</ul>
<p ><em>PaHM</em> can be downloaded using one of the following methods:</p>
<ol type="1">
<li><p class="startli">Clone the source code from GitHub using the command:</p>
<div class="fragment"><div class="line">git clone https://github.com/noaa-ocs-modeling/PaHM PaHM</div>
</div><!-- fragment --><p class="startli">The source will be downloaded into the target directory PaHM.</p>
</li>
<li><p class="startli">Download the source archive using the command:</p>
<div class="fragment"><div class="line">wget https://github.com/noaa-ocs-modeling/PaHM/archive/refs/heads/main.zip</div>
</div><!-- fragment --><p class="startli">and extract the sources in the PaHM directory by issuing the following commands:</p>
<div class="fragment"><div class="line">unzip -o main.zip  (the data will be extracted into the PaHM-main directory)</div>
<div class="line"> </div>
<div class="line">mv PaHM-main PaHM  (move the extracted files to the PaHM directory)</div>
</div><!-- fragment --></li>
</ol>
<p >Even if an archive is sufficient, it is advisable to use the distributed version control system Git to follow the <em>PaHM</em> development to merge easily to new versions. New Git users are invited to read some of the online guides to get familiar with vanilla Git concepts and commands:</p>
<ul>
<li>Basic and advanced guide with the <a href="https://git-scm.com/book/en/v2/" target="_BLANK" rel="NOREFERRER">Git Book</a>.</li>
<li>Reference guides with the <a href="https://git-scm.com/docs/" target="_BLANK" rel="NOREFERRER">Git Reference</a>.</li>
<li>GitHub reference sheets with the <a href="https://training.github.com/" target="_BLANK" rel="NOREFERRER">GitHub Reference</a>.</li>
<li>Manage your GitHub repositories with Git <a href="https://docs.github.com/en/get-started/using-git/" target="_BLANK" rel="NOREFERRER">Using Git</a>.</li>
</ul>
<h2><a class="anchor" id="pahmsys_down_tree"></a>
Directory Structure</h2>
<p >After downloading <em>PaHM</em>, let us look at the physical directories and the source code and configuration files that come with the system. The ''<em>PaHM</em> ROOT'' directory contains the source and all configuration files required to build and run <em>PaHM</em> (see Figure [<a class="el" href="pahmsys.html#pahmsys_fig01">1</a>]). The directories of interest are the <b>src</b>, <b>scripts</b>, <b>cmake</b> and <b>inputs</b> directories.</p>
<p ><a class="anchor" id="pahmsys_fig01"></a></p><table width="100%" align="center" cellspacing="0" border="0">
<tr>
<td align="center" valign="middle"><p class="starttd"><img src="pahm-dir-tree-02.png" alt="" width="90%" class="inline"/>    </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td align="left" valign="top"><b>Figure 1:</b> Directory tree of the <em>PaHM</em> modeling system.   </td></tr>
</table>
<ul>
<li><b>src: </b> Contains all the Fortran code of <em>PaHM</em>.</li>
<li><b>scripts: </b> <em>PaHM</em> uses <a href="https://www.gnu.org/software/bash/" target="_BLANK" rel="NOREFERRER">Bash</a> for its automated build infrastructure and this directory contains all system "build" scripts required to build the model. The top level <a href="https://github.com/noaa-ocs-modeling/PaHM/blob/main/scripts/build.sh" target="_BLANK" rel="NOREFERRER">build.sh</a> script is the script to run to create the <em>PaHM</em> executable (extended details are given in section [<a class="el" href="pahmsys.html#pahmsys_build_bld">The Build System</a>]).</li>
<li><b>cmake: </b> The "build" system of <em>PaHM</em> is supported by <a href="https://cmake.org/" target="_BLANK" rel="NOREFERRER">CMake</a> that manages the build process in a compiler-independent manner. This directory contains the CMake all related configuration files and modules for <em>PaHM</em> that are required to properly configure the build process for the host operating system (more details are given in section [<a class="el" href="pahmsys.html#pahmsys_build_cmake">CMake Configuration Files</a>]).</li>
<li><b>inputs: </b> Contains the input data files for <em>PaHM</em>, like storm track files and grid/mesh files required to generate the wind data for. As <em>PaHM</em> comes with some basic (sample) input files, it is the user's responsibility to populate this directory with additional data files required for the particular simulation(s).</li>
<li><b>templates: </b> Contains sample control files for <em>PaHM</em> required to run the model. The user may copy any of those files into <em>PaHM's</em> root folder and modify it for the particular simulation (further details are given in section [[pahmsys_conf]]). In the same directory are included some NEMS configuration files required when <em>PaHM</em> is used as a coupled modeling component (see section [[pahmsys_conf_coupled]]).</li>
<li><b>third_party_open: </b> Contains the sources of third party libraries that the user can use to compile into the <em>PaHM</em> executable (if required). The libraries shipped with the <em>PaHM</em> distribution are fully open source without any particular licensing restrictions.</li>
<li><b>doc: </b> This directory contains the documentation sources (markdown .md files) to build <em>PaHM's</em> documentation. The documentation is built outside <em>PaHM's</em> build system and it uses the <a href="https://www.doxygen.nl/" target="_BLANK" rel="NOREFERRER">Doxygen</a> documentation creator. It is noted here that all <em>PaHM</em> Fortran files have been fully commented using the Doxygen/Markdown directives. More details on how to generate the documentation can be found in the doc/Readme.md file.</li>
</ul>
<h1><a class="anchor" id="pahmsys_build"></a>
Building <em>PaHM</em></h1>
<p >The build system of <em>PaHM</em> is designed to compile the model requiring a minimal intervention from the user. <em>PaHM</em> supports different compiler families and various Linux/UNIX computing platforms (HPC, clusters, personal desktops, etc).</p>
<h2><a class="anchor" id="pahmsys_build_req"></a>
System Requirements</h2>
<p >To compile <em>PaHM</em> the following programs and libraries are required:</p>
<ul>
<li>Fortran and C compilers: The compilers tested are Intel &ge; 18, GCC &ge; 4.8 and PGI/NVidia &ge; 20.11.</li>
<li>A recent version of CMake (&ge; 3.2).</li>
<li>Git, the distributed version control system.</li>
<li><a href="https://www.unidata.ucar.edu/software/netcdf/" target="_BLANK" rel="NOREFERRER">NetCDF-4</a>: the Network Common Data Form (NetCDF) C and Fortran libraries (usually installed in the host OS).</li>
<li><a href="https://www.hdfgroup.org/" target="_BLANK" rel="NOREFERRER">HDF5</a>: the High-performance software and Data Format (HDF) libraries (usually installed in the host OS).</li>
</ul>
<p >For a successful compilation and run of <em>PaHM</em>, it is required that the model and the NetCDF/HDF5 libraries are built with the same compiler family (not necessarily the same version). This requirement is important as the creation of the NetCDF output files will as this is the case of all modeling systems that use these libraries. Currently, <em>PaHM</em> supports the GNU, Intel and Portland Group/NVidia compiler families.</p>
<h2><a class="anchor" id="pahmsys_build_bld"></a>
The Build System</h2>
<p >To build <em>PaHM</em> the user should run the build.sh bash script located (a link to the scripts/build.sh) in the root directory of the downloaded source code (Figure [<a class="el" href="pahmsys.html#pahmsys_fig01">1</a>]). The following steps will help you to build <em>PaHM</em> on your local machine or your cluster of choice.</p>
<ol type="1">
<li>Make sure that CMake and the NetCDF/HDF5 libraries are in the user's PATH environment (in a Cluster/HPC system that uses the environment module system, the user should load the modules for cmake and netcdf, hdf5 before building <em>PaHM</em>).</li>
<li><p class="startli">Change the working directory to the <em>PaHM</em> root:</p>
<div class="fragment"><div class="line">cd /INSTALL_PATH/PaHM</div>
</div><!-- fragment --></li>
<li><p class="startli">Run the build script as:</p>
<div class="fragment"><div class="line">./build.sh</div>
</div><!-- fragment --><p class="startli">to get the following screen output: <br  />
 </p><div class="fragment"><div class="line">The following variables are defined:</div>
<div class="line">    ACCEPT_ALL         = 0</div>
<div class="line">    PROJECT_SOURCE_DIR = /INSTALL_PATH/PaHM</div>
<div class="line">    PROJECT_BINARY_DIR = /INSTALL_PATH/PaHM/build</div>
<div class="line">    CMAKE_SOURCE_DIR   = /INSTALL_PATH/PaHM</div>
<div class="line">    CMAKE_BINARY_DIR   = /INSTALL_PATH/PaHM/build</div>
<div class="line">    INSTALL_DIR        = /INSTALL_PATH/PaHM</div>
<div class="line">    CMAKE_BUILD_TYPE   = Release</div>
<div class="line">    CMAKE_FLAGS        = -DCMAKE_BUILD_TYPE=Release -DCMAKE_Platform=linux -DCMAKE_VERBOSE_MAKEFILE=TRUE</div>
<div class="line">    PLATFORM           = linux</div>
<div class="line">    COMPILER           = Undefined, Supported values are: [gnu, intel, pgi]</div>
<div class="line">    CC                 = Will use the OS default compiler</div>
<div class="line">    CXX                = Will use the OS default compiler</div>
<div class="line">    FC                 = Will use the OS default compiler</div>
<div class="line">    F90                = Will use the OS default compiler</div>
<div class="line">    VERBOSE            = 0</div>
<div class="line"> </div>
<div class="line">Are these values correct? [y/n]:</div>
</div><!-- fragment --><p class="startli">if the above settings are correct, type "y + &lt;ENTER&gt;" to continue with the compilation. Upon successful compilation the <em>PaHM</em> executable will be placed into the "bin" directory at the <em>PaHM</em> root.</p>
</li>
</ol>
<p >The build script tries to determine the host OS, either Linux or, MacOSX (in Windows the user should try to compile <em>PaHM</em> inside a Windows Subsystem for Linux - WSL, or another Linux setup). By default, the build script will use the native Fortran and C compilers (usually gcc and gfortran) for the compilation stage. The script accepts options to further customize the compilation process and it is suggested that the user should at first run the script as: <code>./build.sh --help</code> to see all available options as shown in Figure [<a class="el" href="pahmsys.html#pahmsys_fig02">2</a>].</p>
<p ><a class="anchor" id="pahmsys_fig02"></a></p><table width="100%" align="center" cellspacing="0" border="0">
<tr>
<td align="center" valign="top"><p class="starttd"><img src="pahm-usage.png" alt="" width="90%" class="inline"/>    </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td align="left" valign="top"><b>Figure 2:</b> Build script (build.sh) options.   </td></tr>
</table>
<p >The two influential options of the script are <code>--compiler</code> and <code>--platform</code> where the user can supply what compiler family to use and what platform to compile <em>PaHM</em> for (in the cmake folder there are customized platform cmake modules that the script loads per user's request). For example, to compile <em>PaHM</em> using the Intel compilers on the Orion HPC cluster of <a href="https://www.hpc.msstate.edu/computing/hpc.php" target="_BLANK" rel="NOREFERRER">Mississippi State University</a>, the user should run the script as:</p>
<div class="fragment"><div class="line">./build.sh --compiler intel --platform orion</div>
</div><!-- fragment --><p >Figure [<a class="el" href="pahmsys.html#pahmsys_fig02">2</a>], shows all currently available options in "build.sh" accompanied by the detailed explanation for each option.</p>
<h2><a class="anchor" id="pahmsys_build_cmake"></a>
CMake Configuration Files and Modules</h2>
<p >The directory "PaHM/cmake" contains the CMake modules and auxiliary files used for the configuration of the CMake based build system used by <em>PaHM</em>, so that many setup and com[ilation steps can be automated. The most common steps to build, and install software based on CMake, like <em>PaHM</em> are:</p>
<ol type="1">
<li>Create a "build" directory and change into it.</li>
<li>Run CMake to configure the build tree (for a minimally CMake configuration run: <code>cmake ../</code>).</li>
<li>Build the software using the generated Makefile (run: <code>make</code>).</li>
<li>Install the built files (run: <code>make install</code>).</li>
</ol>
<p >In the parent directory of the "build" folder (PaHM/) it should be located a file called "CMakeLists.txt" that CMake requires for its configuration. This "CMakeLists.txt" in addition of calling CMake modules from the PaHM/cmake folder, it also contains CMake directives that modify the behavior of the configuration process. In step (2) above the user can supply additional flags defined in "CMakeLists.txt" and in PaHM/cmake modules or global CMake flags that might influence the compilation stage as shown in the following example:</p>
<div class="fragment"><div class="line">cmake ../ -DENABLE_DATETIME=TRUE -DF90=ifort -DINSTALL_DIR=&quot;some installation location&quot;</div>
</div><!-- fragment --><p >The <em>PaHM</em> CMake system will pick-up the values of these variables if set in the user's environment, and continue with the configuration with these variable definitions, for example:</p>
<div class="fragment"><div class="line">In Bash use:</div>
<div class="line"> </div>
<div class="line">export F90=ifort</div>
<div class="line">export INSTALL_DIR=&quot;some installation location&quot;</div>
<div class="line"> </div>
<div class="line">and run cmake as:</div>
<div class="line"> </div>
<div class="line">cmake ../ -DENABLE_DATETIME=TRUE</div>
</div><!-- fragment --><p >The user is encouraged to take a look of the "CMakeLists.txt" and the PaHM/cmake modules to gain an understanding on how the CMake build system in <em>PaHM</em> works. By design, the CMake build system in <em>PaHM</em> uses the user's environment as well as the command line interchangeably to pick-up the values of any user supplied variables related to <em>PaHM</em>. The main CMake module groups in <em>PaHM</em> are (a) the System group, (b) the Compiler group and (c) the Platform group (see Figure [<a class="el" href="pahmsys.html#pahmsys_fig01">1</a>]).</p>
<p ><b>(a) System group :</b> Consists of the core CMake modules required to configure and compile <em>PaHM</em>:</p>
<table width="80%" align="center" cellspacing="5" border="0">
<tr>
<td align="right" valign="middle" width="25%">arch.cmake :  </td><td width="2%"></td><td align="left" valign="middle">Architecture specifications   </td></tr>
<tr>
<td align="right" valign="middle" width="25%">check_netcdf.cmake :  </td><td width="2%"></td><td align="left" valign="middle">Checks for the availability and usability of the netcdf libraries   </td></tr>
<tr>
<td align="right" valign="middle" width="25%">distclean.cmake :  </td><td width="2%"></td><td align="left" valign="middle">Incorporates the "distclean" rule into the cmake generated makefiles   </td></tr>
<tr>
<td align="right" valign="middle" width="25%">macros.cmake :  </td><td width="2%"></td><td align="left" valign="middle">Macros to aid the compile/link processes   </td></tr>
<tr>
<td align="right" valign="middle" width="25%">options.cmake :  </td><td width="2%"></td><td align="left" valign="middle">Definitions of what libraries and executables to build (supported static and shared libraries for <em>PaHM</em>)   </td></tr>
<tr>
<td align="right" valign="middle" width="25%">pahm.cmake :  </td><td width="2%"></td><td align="left" valign="middle">Definitions to build <em>PaHM</em>, libpahm.a and/or libpahm.so; lists all required sources for each build   </td></tr>
<tr>
<td align="right" valign="middle" width="25%">Modules :  </td><td width="2%"></td><td align="left" valign="middle">In this folder are contained the utility and "find" modules for CMake (e.g., FindNetCDF.cmake) required to set depended variable for the configuration and compilation statges   </td></tr>
</table>
<p ><b>(b) Compiler group :</b> The modules in the compiler group define the compiler flags for the three compiler families supported by <em>PaHM</em> (GNU, Intel and PGI). Supplying the compiler option to the "build.sh", as discussed discussed in section [<a class="el" href="pahmsys.html#pahmsys_build_bld">The Build System</a>], the script loads the proper compiler module: "configure_COMPILER.cmake", where: COMPILER = [one of gnu, intel, pgi] In the right panel of Figure [<a class="el" href="pahmsys.html#pahmsys_fig03">3</a>], are shown the contents of the module file for "intel" that is, the definitions of the flags passed to the compiler during the compilation and link stages. The user may modify the file directly to fit particular project's needs or, to pass the relevant compiler flags via the "build.sh", for example:</p>
<div class="fragment"><div class="line">./build.sh --compiler intel --cmake_flags &quot;-DCMAKE_Fortran_FLAGS=\&quot;-g -O2\&quot; -DDEBUG=TRUE&quot;</div>
</div><!-- fragment --><p ><a class="anchor" id="pahmsys_fig03"></a></p><table width="100%" align="center" cellspacing="0" border="0">
<tr>
<td align="center" valign="top"><p class="starttd"><img src="PaHM-cmake-intel-combined.png" alt="" width="80%" class="inline"/>    </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td align="left" valign="top"><b>Figure 3:</b> CMake modules for the <em>PaHM</em> supported compilers.   </td></tr>
</table>
<p ><b>(c) Platform group :</b> The folder "PaHM/cmake/Platforms" contains the CMake modules for the <em>PaHM</em> supported computing platforms (HPC clusters or local desktops). The list of predefined platform modules are shown in Figure [<a class="el" href="pahmsys.html#pahmsys_fig04">4</a>] (left panel) where in the right panel are shown the contents of the platform file for "orion" using the "intel" compiler. This file is loaded by CMake when the build script is run as:</p>
<div class="fragment"><div class="line">./build.sh --compiler intel --platform orion ... other options</div>
</div><!-- fragment --><p >When any of these modules is loaded, it sets the environment variables for the loaded libraries (currently NetCDF and HDF5) in an HPC cluster or a local desktop. Computing system configurations change from time to time and the user might need to directly modify the module file to reflect the OS changes or, to use the "custom" platform (e.g., configure_intel.custom.cmake) and incorporate the changes there.</p>
<p ><a class="anchor" id="pahmsys_fig04"></a></p><table width="100%" align="center" cellspacing="0" border="0">
<tr>
<td align="center" valign="top"><p class="starttd"><img src="PaHM-cmake-intel-orion-combined.png" alt="" width="85%" class="inline"/>    </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td align="left" valign="top"><b>Figure 4:</b> CMake modules for the <em>PaHM</em> supported computing platforms.   </td></tr>
</table>
<p >Additional platform modules can be added with ease, by copying one of the existing module files in "PaHM/cmake/Platforms" to say: PaHM/cmake/Platforms/configure_intel.my_own.cmake. This new module file should first be modified to reflect the settings of the host platform and then run the build script as:</p>
<div class="fragment"><div class="line">./build.sh --compiler intel --platform my_own ... other options</div>
</div><!-- fragment --><p >to use the newly developed platform module file.</p>
<h1><a class="anchor" id="pahmsys_use"></a>
Using <em>PaHM</em></h1>
<p >Before you can use <em>PaHM</em>, you must have a working <em>PaHM</em> installation as described in section [<a class="el" href="pahmsys.html#pahmsys_build_bld">The Build System</a>]. Assuming that <em>PaHM</em> is installed in the "PaHM/bin" folder (default), the model may be run as: <code>bin/pahm --help</code> to print the list of the available command line arguments to the model. By default, running <em>PaHM</em> without arguments as the model tries to find its default control file (pahm_control.in) located in the current working directory. The user may supply another control file by running <em>PaHM</em> as:</p>
<div class="fragment"><div class="line">pahm LOCATION_OF_CONTROL_FILE/custom_control_file.in</div>
</div><!-- fragment --><p >A typical control file looks like the one shown in Figure [<a class="el" href="pahmsys.html#pahmsys_fig05">5</a>]. It is the user's responsibility to create the proper control file to be used by <em>PaHM</em> for the particular application.</p>
<p ><a class="anchor" id="pahmsys_fig05"></a></p><table width="100%" align="center" cellspacing="0" border="0">
<tr>
<td align="center" valign="top"><p class="starttd"><img src="pahm_control.png" alt="" width="75%" class="inline"/>    </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td align="left" valign="top"><b>Figure 5:</b> Sample <em>PaHM</em> input configuration (control) file.   </td></tr>
</table>
<p >The control file is required either running <em>PaHM</em> as a standalone model or as a coupled modeling component.</p>
<h2><a class="anchor" id="pahmsys_use_coupled"></a>
Coupled Model Configuration</h2>
<p >This section is dedicated to the NEMS/NUOPC coupling onfiguration </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 26 2022 00:46:24 for PaHM by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
